<!-- Model driven -->
<div class="form__container py-5">
  <form class="form" [formGroup]="formRegister" (ngSubmit)="onSubmit()">
    <h2 class="form__title">Regístrate</h2>
    <p class="form__subtitle">Consigue acceso completo a la app myBooks</p>
    <div class="row">
      <div class="col-md-6 form__element form-floating">
        <input type="text" class="form-control" formControlName="nombre" placeholder="Nombre completo" [ngClass]="{
            'is-invalid':
              (formRegister.get('nombre')?.dirty ||
                formRegister.get('nombre')?.touched) &&
              !formRegister.get('nombre')?.valid
          }" />
        <div *ngIf="!formRegister.get('nombre')?.valid" class="invalid-feedback">
          El nombre es necesario
        </div>
        <label for="nombre" class="form__element-label">Nombre</label>
      </div>
      <div class="col-md-6 form__element form-floating">

        <input type="text" class="form-control" formControlName="apellidos" placeholder="Primer y segundo apellidos"
          [ngClass]="{
              'is-invalid':
                (formRegister.get('apellidos')?.dirty ||
                  formRegister.get('apellidos')?.touched) &&
                !formRegister.get('apellidos')?.valid
            }" />
        <div *ngIf="!formRegister.get('apellidos')?.valid" class="invalid-feedback">
          Los apellidos son necesarios
        </div>
        <label for="apellidos" class="form__element-label">Apellidos</label>
      </div>
    </div>
    <div class="row">
      <div class="form__element form-floating">
        <input type="text" class="form-control" formControlName="photo" placeholder="Imagen de perfil" [ngClass]="{
            'is-invalid':
              (formRegister.get('photo')?.dirty ||
                formRegister.get('photo')?.touched) &&
              !formRegister.get('photo')?.valid
          }" />
        <div *ngIf="!formRegister.get('photo')?.valid" class="invalid-feedback">
          La url de la imagen es necesaria
        </div>
        <label for="nombre" class="form__element-label">Imagen de perfil</label>
      </div>
    </div>
    <div class="row">
      <div class="form__element form-floating"> 
        <input type="email" class="form-control" formControlName="email" placeholder="Correo electrónico de registro"
          [ngClass]="{
            'is-invalid':
              (formRegister.get('email')?.dirty ||
                formRegister.get('email')?.touched) &&
              !formRegister.get('email')?.valid
          }" />
        <div *ngIf="!formRegister.get('email')?.valid" class="invalid-feedback">
          <div *ngIf="formRegister.get('email')?.errors?.['required']">
            El email es obligatorio
          </div>
          <div *ngIf="formRegister.get('email')?.errors?.['email']">
            El email es incorrecto
          </div>
        </div>
        <label for="email" class="form__element-label">Correo electrónico</label>
      </div>
    </div>
    <div class="row">
      <div class="form__element form-floating">
        <input type="password" class="form-control" formControlName="password" placeholder="Escribe tu contraseña"
          [ngClass]="{
            'is-invalid':
              (formRegister.get('password')?.dirty ||
                formRegister.get('password')?.touched) &&
              !formRegister.get('password')?.valid
          }" />
        <div *ngIf="!formRegister.get('password')?.valid" class="invalid-feedback">
          <div *ngIf="formRegister.get('password')?.errors?.['required']">
            La contraseña es obligatoria
          </div>
          <div *ngIf="formRegister.get('password')?.errors?.['invalidPassword']">
            La contraseña debe tener al menos 8 caracteres, incluyendo números,
            mayúsculas, minúsculas y símbolos especiales
          </div>
        </div>
        <label for="password" class="form__element-label">Contraseña:</label>
      </div>
    </div>
    <div class="row"> 
      <div class="form__element form-floating">
        <input type="password" class="form-control" formControlName="password2" placeholder="Repite tu contraseña"
          [ngClass]="{
            'is-invalid':
              (formRegister.get('password2')?.dirty ||
                formRegister.get('password2')?.touched) &&
              !formRegister.get('password2')?.valid
          }" />
        <div *ngIf="!formRegister.get('password2')?.valid" class="invalid-feedback">
          <div *ngIf="formRegister.get('password2')?.errors?.['required']">
            La contraseña es obligatoria
          </div>
          <div *ngIf="formRegister.get('password2')?.errors?.['unMatchPassword']">
            Las contraseñas no coinciden
          </div>
        </div>
        <label for="password-repeat" class="form__element-label">Confirma la contraseña:</label>
      </div>
    </div>

    <div class="--center">
      <p class="form__subtitle">
        ¿Ya tienes cuenta? <span><a routerLink="/login">Login</a></span>
      </p>
      <button class="form__button cta" type="submit" [disabled]="formRegister.invalid"
        [ngStyle]="{ opacity: !formRegister.invalid ? 1 : 0.5 }">
        Registrarse
      </button>
    </div>
  </form>
</div>